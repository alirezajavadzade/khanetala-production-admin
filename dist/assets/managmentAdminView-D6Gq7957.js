import{a5 as A,a6 as b,_ as C,r,k as L,c as u,b as o,w as a,e as d,a7 as w,h as p,F as x,o as l,a1 as B,a2 as I,V as k,C as N,t as T}from"./index-Dbwicb6H.js";import{V as S}from"./VContainer-DGzafa5x.js";import{V as j}from"./VCard-BQgM7hxv.js";import{V as z}from"./VTextField-Bpc0VdGj.js";import{V as M}from"./VDataTable-CTIwBiR6.js";import"./index-CSwstpxY.js";import"./VImg-IfgpgyIs.js";import"./VSelect-De4jifd_.js";import"./VMenu-C6U2brb9.js";const v=b(),f=A.create({baseURL:"https://gateway.khaneetala.ir/v1/admin",headers:{"Content-Type":"application/json",Accept:"application/json"}});f.interceptors.request.use(e=>{const n=localStorage.getItem("token");return n?e.headers.Authorization=`Bearer ${n}`:v.replace("/login"),e},e=>Promise.reject(e));f.interceptors.response.use(e=>e,e=>(e.response.status==401&&(localStorage.removeItem("token"),v.replace("/login")),console.error("API Error:",e.response||e.message),Promise.reject(e)));const D={async AdminList(){return(await f.get("/all")).data}},E={key:0,class:"table-green"},F={key:1,class:"table-red"},P={__name:"managmentAdminView",setup(e){const n=r([{title:"نام",key:"firstName"},{title:"نام خانوادگی",key:"lastName"},{title:"شماره همراه",key:"phoneNumber"},{title:"نقش",key:"role"},{title:"اکتیو",key:"isBlocked"},{title:"فعالیت",key:"action"}]),V=r([]),i=r(""),c=r(!1),_=r(""),m=r(!1),y=async()=>{try{c.value=!0;const s=await D.AdminList();return V.value=s.data,s}catch(s){_.value=s.response.data.error||"خطایی رخ داده است!",m.value=!0,setTimeout(()=>{m.value=!1},1e4)}finally{c.value=!1}},h=async s=>{console.log(s)};return L(()=>{y()}),(s,g)=>(l(),u(x,null,[o(S,null,{default:a(()=>[o(B,null,{default:a(()=>[o(I,{cols:"12"},{default:a(()=>[o(j,{title:"سطح دسترسی ها"},{text:a(()=>[o(z,{modelValue:i.value,"onUpdate:modelValue":g[0]||(g[0]=t=>i.value=t),label:"جستجو","prepend-inner-icon":"ri-search-line"},null,8,["modelValue"])]),default:a(()=>[o(M,{headers:n.value,items:V.value,search:i.value,loading:c.value},{"item.isBlocked":a(({item:t})=>[t.isBlocked==!0?(l(),d(k,{key:0,size:"small",icon:"ri-close-line",color:"#c9190c"})):t.isBlocked==!1?(l(),d(k,{key:1,size:"small",icon:"ri-check-line",color:"#0b8707"})):p("",!0)]),"item.role":a(({item:t})=>[t.role==!0?(l(),u("span",E,"مدیر")):t.role==!1?(l(),u("span",F,"کارشناس")):p("",!0)]),"item.action":a(({item:t})=>[o(k,{class:"me-2",size:"small",icon:"ri-user-settings-line",color:"#d4af37",onClick:R=>h(t)},null,8,["onClick"])]),_:1},8,["headers","items","search","loading"])]),_:1})]),_:1})]),_:1})]),_:1}),m.value?(l(),d(w,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:a(()=>[N(T(_.value),1)]),_:1})):p("",!0)],64))}},W=C(P,[["__scopeId","data-v-7d8862f9"]]);export{W as default};
