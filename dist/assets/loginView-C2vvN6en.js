import{_ as k,r as s,a as w,g as x,w as u,b1 as N,a_ as _,b as p,d as n,o as c,D as v,t as h,aY as S,aZ as I,aV as B}from"./index-B-tdYEh_.js";import{c as f,V as C,a as D,b as g}from"./VTextField-DQHt6iJf.js";import"./index-qnvCszMl.js";import"./VImg-Die6F3JI.js";const T={async Shahkar(r){const o=await f.post("",r);return localStorage.setItem("authtoken",o.data.token),o.data},async Login(r){const o=JSON.stringify(r),e=await f.post("/login",o);console.log(e);const l=e.data.data.token;return localStorage.setItem("token",l),e.data}},L="/logo.png",A={__name:"loginView",setup(r){const o=s(!1),e=s({phoneNumber:"",password:""}),l=s(!1),m=s("test"),d=s(!1),b=[a=>!!a||"شماره همراه نمی‌تواند خالی باشد",a=>/^\d{11}$/.test(a)||"شماره همراه باید 11 رقم باشد",a=>a.startsWith("09")||"شماره همراه باید با 09 شروع شود"],V=()=>{e.value.phoneNumber=e.value.phoneNumber.replace(/\D/g,"").slice(0,11)},y=async()=>{try{l.value=!0;const a=await T.Login(e.value);return B.push("/Dashboard"),a}catch(a){console.log(a),m.value=a.response.data.error||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{l.value=!1}};return(a,t)=>(c(),w("div",null,[d.value?(c(),x(N,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:u(()=>[v(h(m.value),1)]),_:1})):_("",!0),t[4]||(t[4]=p("div",{class:"d-flex flex-column justify-center align-items-center"},[p("img",{src:L,class:"mx-auto my-6","max-width":"228",alt:"خانه طلا"}),p("p",{class:"title"},"پنل مدیریت خانه طلا")],-1)),n(C,{class:"mx-2 mx-md-auto pa-8",elevation:"4","max-width":"448",rounded:"lg"},{default:u(()=>[n(D,{ref:"form",onSubmit:S(y,["prevent"])},{default:u(()=>[n(g,{modelValue:e.value.phoneNumber,"onUpdate:modelValue":t[0]||(t[0]=i=>e.value.phoneNumber=i),label:"شماره همراه",class:"my-6 login-input",rules:b,onInput:V},null,8,["modelValue"]),n(g,{modelValue:e.value.password,"onUpdate:modelValue":t[1]||(t[1]=i=>e.value.password=i),label:"رمز عبور",class:"my-6 login-input","append-inner-icon":o.value?"ri-eye-line":"ri-eye-off-line",type:o.value?"text":"password","onClick:appendInner":t[2]||(t[2]=i=>o.value=!o.value)},null,8,["modelValue","append-inner-icon","type"]),n(I,{type:"submit",class:"mb-8 k-btn",color:"#d4af37",size:"large",loading:l.value,block:""},{default:u(()=>t[3]||(t[3]=[v(" ورود به پنل ")])),_:1},8,["loading"])]),_:1},512)]),_:1})]))}},$=k(A,[["__scopeId","data-v-9ddc9419"]]);export{$ as default};
