import{G as k}from"./goldbox-D5Dc7hcC.js";import{_ as U,r as a,i as M,c as z,b as t,w as e,$ as A,e as b,a5 as S,a3 as B,o as f,a0 as _,A as m,a as r,t as i}from"./index-DjNzcbqM.js";import{V as E,a as G,b as H,c as h}from"./VTabs-CrEmvt6R.js";import{b as R,V as w,a as C}from"./VTextField-Bw-Xl8Zy.js";import{V as T}from"./VDataTable-CZrXX--U.js";import{a as N}from"./VSelect-CqfXUnRo.js";import"./api-CdLXfT_9.js";import"./index-B0HBNqC6.js";import"./VImg-CeO24wdD.js";import"./VWindowItem-DKFMC4B1.js";import"./VMenu-a3kwn1Ad.js";const $={__name:"goldboxSellView",setup(j){const c=a(""),F=a(""),d=a(!1),W=a(!1),u=a(null),v=a(),P=a([{title:"نام",key:"seller.firstName"},{title:"نام خانوادگی",key:"seller.lastName"},{title:"مبلغ خرید (ریال)",key:"totalPrice"},{title:"وزن طلا (گرم)",key:"goldWeight"},{title:"تاریخ",key:"date"},{title:"زمان",key:"time"},{title:"شناسه پرداخت",key:"invoiceId"},{title:"وضعیت",key:"status"}]),D=a([{title:"نام",key:"seller.firstName"},{title:"نام خانوادگی",key:"seller.lastName"},{title:"مبلغ خرید (ریال)",key:"totalPrice"},{title:"وزن طلا (گرم)",key:"goldWeight"},{title:"تاریخ",key:"date"},{title:"زمان",key:"time"},{title:"شناسه پرداخت",key:"invoiceId"},{title:"وضعیت",key:"status"}]),V=a(),n=a(),x=a(),g=a(),p=a(),I=async()=>{try{n.value=!0;const o=await k.SellGoldBox(1);return V.value=o.data,o}catch(o){c.value=o.response.data.error||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}finally{n.value=!1}},L=async()=>{try{x.value=!0;const o=await k.SellGoldBox(0);return g.value=o.data,o}catch(o){c.value=o.response.data.error||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}finally{x.value=!1}},y=o=>o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");return M(()=>{I(),L()}),(o,s)=>(f(),z("div",null,[t(A,null,{default:e(()=>[t(_,null,{default:e(()=>[t(E,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=l=>u.value=l),"align-tabs":"center"},{default:e(()=>[t(G,{value:"one"},{default:e(()=>s[4]||(s[4]=[m("فروش های موفق")])),_:1}),t(G,{value:"two"},{default:e(()=>s[5]||(s[5]=[m("فروش های ناموفق")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(_,{cols:"12"},{default:e(()=>[t(R,null,{default:e(()=>[t(H,{modelValue:u.value,"onUpdate:modelValue":s[3]||(s[3]=l=>u.value=l)},{default:e(()=>[t(h,{value:"one"},{default:e(()=>[t(w,{title:"فروش موفق"},{text:e(()=>[t(C,{modelValue:v.value,"onUpdate:modelValue":s[1]||(s[1]=l=>v.value=l),label:"جستجو","prepend-inner-icon":"ri-search-line"},null,8,["modelValue"])]),default:e(()=>[t(T,{headers:P.value,items:V.value,search:v.value,loading:n.value},{"item.totalPrice":e(({item:l})=>[r("p",null,i(y(l.totalPrice)),1)]),"item.goldWeight":e(({item:l})=>[r("p",null,i((+l.goldWeight).toFixed(2)),1)]),"item.status":e(({item:l})=>[r("div",null,[t(N,{text:l.status=="completed"?"موفق":"نامشخص",color:l.status=="completed"?"#00853f":"#66666",size:"small"},null,8,["text","color"])])]),_:1},8,["headers","items","search","loading"])]),_:1})]),_:1}),t(h,{value:"two"},{default:e(()=>[t(w,{title:"فروش ناموفق"},{text:e(()=>[t(C,{modelValue:p.value,"onUpdate:modelValue":s[2]||(s[2]=l=>p.value=l),label:"جستجو","prepend-inner-icon":"ri-search-line"},null,8,["modelValue"])]),default:e(()=>[t(T,{headers:D.value,items:g.value,search:p.value,loading:n.value},{"item.totalPrice":e(({item:l})=>[r("p",null,i(y(l.totalPrice)),1)]),"item.goldWeight":e(({item:l})=>[r("p",null,i((+l.goldWeight).toFixed(2)),1)]),"item.status":e(({item:l})=>[r("div",null,[t(N,{text:l.status=="failed"?"ناموفق":"نامشخص",color:l.status=="failed"?"#ff0000":"#66666",size:"small"},null,8,["text","color"])])]),_:1},8,["headers","items","search","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),d.value?(f(),b(S,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:e(()=>[m(i(c.value),1)]),_:1})):B("",!0),W.value?(f(),b(S,{key:1,color:"success",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:e(()=>[m(i(F.value),1)]),_:1})):B("",!0)]))}},ae=U($,[["__scopeId","data-v-ca8bd46a"]]);export{ae as default};
