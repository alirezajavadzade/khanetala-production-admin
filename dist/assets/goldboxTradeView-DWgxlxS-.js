import{G as ke}from"./goldbox-CAESymJA.js";import{a5 as Je,C as O,E as ae,T as Qe,J as le,b as a,a7 as Be,a3 as R,a8 as Ke,a9 as Xe,aa as Ze,ab as ea,z as _,Y as _e,ac as We,ad as aa,V as re,L as ee,D as la,ae as ta,G as Ge,I as de,af as na,M as sa,ag as ua,ah as oa,N as ra,ai as ia,O as da,P as va,Q as ca,aj as ma,R as fa,v as pa,ak as ba,al as ya,am as ga,W as Va,an as xa,S as ka,ao as ha,ap as wa,aq as Pa,ar as Sa,l as Ca,as as _a,at as Te,au as Ia,F as ve,r as f,y as Na,av as Ba,j as Ta,i as pe,k as Fa,aw as Da,ax as Aa,ay as Se,az as Ra,aA as za,aB as Wa,_ as Ga,c as Z,w as n,a0 as M,e as W,a6 as Fe,a4 as L,o as P,a1 as m,aC as Ua,a as r,B as A,t as G,p as Ea,aD as Ha}from"./index-CLwyfoDa.js";import{V as $a,f as ja}from"./index-B3aCsBYG.js";import{m as Ma,V as De,a as La,b as Ae}from"./VWindowItem-VDx_OkCz.js";import{e as Oa}from"./VMenu-Ci0XvDDa.js";import{m as qa,d as Ya,u as Ja,e as Re,f as Qa,g as Ka,h as Xa,V as be,a as oe,c as ye}from"./VTextField-BWWS5fjd.js";import{V as ge}from"./VForm-jyKHH1ts.js";import{V as Ve}from"./VContainer-D2H1Nwuf.js";import{V as Ce}from"./VSelect-CcSQSyiD.js";import{I as Za}from"./VImg-DRgpFK2E.js";import"./api-DtuLzaTW.js";const Ie=Je.create({baseURL:"https://khaneetala.ir/api",headers:{"Content-Type":"application/json",Accept:"application/json"}});Ie.interceptors.request.use(e=>{const d=localStorage.getItem("token");return d&&(e.headers.Authorization=`Bearer ${d}`),e},e=>Promise.reject(e));Ie.interceptors.response.use(e=>e,e=>(e.response.status==401&&(localStorage.removeItem("token"),router.push("/login")),console.error("API Error:",e.response||e.message),Promise.reject(e)));const el={async GoldPriceByTime(e){return(await Ie.get(`/goldPrice/${e}`)).data}},Ne=Symbol.for("vuetify:v-stepper"),Ue=O({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),al=ae()({name:"VStepperActions",props:Ue(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,d){let{emit:o,slots:i}=d;const{t:v}=Qe();function b(){o("click:prev")}function y(){o("click:next")}return le(()=>{const x={onClick:b},h={onClick:y};return a("div",{class:"v-stepper-actions"},[a(Be,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:v(e.prevText),variant:"text"}}},{default:()=>{var g;return[((g=i.prev)==null?void 0:g.call(i,{props:x}))??a(R,x,null)]}}),a(Be,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:v(e.nextText),variant:"tonal"}}},{default:()=>{var g;return[((g=i.next)==null?void 0:g.call(i,{props:h}))??a(R,h,null)]}})])}),{}}}),Ee=Ke("v-stepper-header"),ll=O({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:ee,default:"$complete"},editable:Boolean,editIcon:{type:ee,default:"$edit"},error:Boolean,errorIcon:{type:ee,default:"$error"},icon:ee,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),tl=O({...ll(),...Xe()},"VStepperItem"),He=ae()({name:"VStepperItem",directives:{Ripple:Ze},props:tl(),emits:{"group:selected":e=>!0},setup(e,d){let{slots:o}=d;const i=ea(e,Ne,!0),v=_(()=>(i==null?void 0:i.value.value)??e.value),b=_(()=>e.rules.every(w=>w()===!0)),y=_(()=>!e.disabled&&e.editable),x=_(()=>!e.disabled&&e.editable),h=_(()=>e.error||!b.value),g=_(()=>e.complete||e.rules.length>0&&b.value),B=_(()=>h.value?e.errorIcon:g.value?e.completeIcon:i.isSelected.value&&e.editable?e.editIcon:e.icon),z=_(()=>({canEdit:x.value,hasError:h.value,hasCompleted:g.value,title:e.title,subtitle:e.subtitle,step:v.value,value:e.value}));return le(()=>{var k,V,u;const w=(!i||i.isSelected.value||g.value||x.value)&&!h.value&&!e.disabled,E=!!(e.title!=null||o.title),S=!!(e.subtitle!=null||o.subtitle);function c(){i==null||i.toggle()}return _e(a("button",{class:["v-stepper-item",{"v-stepper-item--complete":g.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":h.value},i==null?void 0:i.selectedClass.value],disabled:!e.editable,onClick:c},[y.value&&aa(!0,"v-stepper-item"),a($a,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:w?e.color:void 0,size:24},{default:()=>{var T;return[((T=o.icon)==null?void 0:T.call(o,z.value))??(B.value?a(re,{icon:B.value},null):v.value)]}}),a("div",{class:"v-stepper-item__content"},[E&&a("div",{key:"title",class:"v-stepper-item__title"},[((k=o.title)==null?void 0:k.call(o,z.value))??e.title]),S&&a("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[((V=o.subtitle)==null?void 0:V.call(o,z.value))??e.subtitle]),(u=o.default)==null?void 0:u.call(o,z.value)])]),[[We("ripple"),e.ripple&&e.editable,null]])}),{}}}),nl=O({...la(Ma(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),$e=ae()({name:"VStepperWindow",props:nl(),emits:{"update:modelValue":e=>!0},setup(e,d){let{slots:o}=d;const i=ta(Ne,null),v=Ge(e,"modelValue"),b=_({get(){var y;return v.value!=null||!i?v.value:(y=i.items.value.find(x=>i.selected.value.includes(x.id)))==null?void 0:y.value},set(y){v.value=y}});return le(()=>{const y=De.filterProps(e);return a(De,de({_as:"VStepperWindow"},y,{modelValue:b.value,"onUpdate:modelValue":x=>b.value=x,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),o)}),{}}}),sl=O({...La()},"VStepperWindowItem"),ie=ae()({name:"VStepperWindowItem",props:sl(),setup(e,d){let{slots:o}=d;return le(()=>{const i=Ae.filterProps(e);return a(Ae,de({_as:"VStepperWindowItem"},i,{class:["v-stepper-window-item",e.class],style:e.style}),o)}),{}}}),je=O({color:String,...na(),...sa(),...ua(),...oa(),...ra(),...ia(),...da(),...va(),...ca()},"VSheet"),ze=ae()({name:"VSheet",props:je(),setup(e,d){let{slots:o}=d;const{themeClasses:i}=ma(e),{backgroundColorClasses:v,backgroundColorStyles:b}=fa(pa(e,"color")),{borderClasses:y}=ba(e),{dimensionStyles:x}=ya(e),{elevationClasses:h}=ga(e),{locationStyles:g}=Va(e),{positionClasses:B}=xa(e),{roundedClasses:z}=ka(e);return le(()=>a(e.tag,{class:["v-sheet",i.value,v.value,y.value,h.value,B.value,z.value,e.class],style:[b.value,x.value,g.value,e.style]},o)),{}}}),ul=O({altLabels:Boolean,bgColor:String,completeIcon:ee,editIcon:ee,editable:Boolean,errorIcon:ee,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...ha()},"Stepper"),ol=O({...ul(),...wa({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...je(),...Pa(Ue(),["prevText","nextText"])},"VStepper"),rl=ae()({name:"VStepper",props:ol(),emits:{"update:modelValue":e=>!0},setup(e,d){let{slots:o}=d;const{items:i,next:v,prev:b,selected:y}=Sa(e,Ne),{displayClasses:x,mobile:h}=Ca(e),{completeIcon:g,editIcon:B,errorIcon:z,color:w,editable:E,prevText:S,nextText:c}=_a(e),k=_(()=>e.items.map((T,Q)=>{const q=Te(T,e.itemTitle,T),I=Te(T,e.itemValue,Q+1);return{title:q,value:I,raw:T}})),V=_(()=>i.value.findIndex(T=>y.value.includes(T.id))),u=_(()=>e.disabled?e.disabled:V.value===0?"prev":V.value===i.value.length-1?"next":!1);return Ia({VStepperItem:{editable:E,errorIcon:z,completeIcon:g,editIcon:B,prevText:S,nextText:c},VStepperActions:{color:w,disabled:u,prevText:S,nextText:c}}),le(()=>{const T=ze.filterProps(e),Q=!!(o.header||e.items.length),q=e.items.length>0,I=!e.hideActions&&!!(q||o.actions);return a(ze,de(T,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":h.value},x.value,e.class],style:e.style}),{default:()=>{var j,Y;return[Q&&a(Ee,{key:"stepper-header"},{default:()=>[k.value.map((F,C)=>{let{raw:p,...N}=F;return a(ve,null,[!!C&&a(Oa,null,null),a(He,N,{default:o[`header-item.${N.value}`]??o.header,icon:o.icon,title:o.title,subtitle:o.subtitle})])})]}),q&&a($e,{key:"stepper-window"},{default:()=>[k.value.map(F=>a(ie,{value:F.value},{default:()=>{var C,p;return((C=o[`item.${F.value}`])==null?void 0:C.call(o,F))??((p=o.item)==null?void 0:p.call(o,F))}}))]}),(j=o.default)==null?void 0:j.call(o,{prev:b,next:v}),I&&(((Y=o.actions)==null?void 0:Y.call(o,{next:v,prev:b}))??a(al,{key:"stepper-actions","onClick:prev":b,"onClick:next":v},o))]}})}),{prev:b,next:v}}}),il=O({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...qa(),...Ya()},"VTextarea"),dl=ae()({name:"VTextarea",directives:{Intersect:Za},inheritAttrs:!1,props:il(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,d){let{attrs:o,emit:i,slots:v}=d;const b=Ge(e,"modelValue"),{isFocused:y,focus:x,blur:h}=Ja(e),g=_(()=>typeof e.counterValue=="function"?e.counterValue(b.value):(b.value||"").toString().length),B=_(()=>{if(o.maxlength)return o.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function z(p,N){var D,U;!e.autofocus||!p||(U=(D=N[0].target)==null?void 0:D.focus)==null||U.call(D)}const w=f(),E=f(),S=Na(""),c=f(),k=_(()=>e.persistentPlaceholder||y.value||e.active);function V(){var p;c.value!==document.activeElement&&((p=c.value)==null||p.focus()),y.value||x()}function u(p){V(),i("click:control",p)}function T(p){i("mousedown:control",p)}function Q(p){p.stopPropagation(),V(),Se(()=>{b.value="",Ra(e["onClick:clear"],p)})}function q(p){var D;const N=p.target;if(b.value=N.value,(D=e.modelModifiers)!=null&&D.trim){const U=[N.selectionStart,N.selectionEnd];Se(()=>{N.selectionStart=U[0],N.selectionEnd=U[1]})}}const I=f(),j=f(+e.rows),Y=_(()=>["plain","underlined"].includes(e.variant));Ba(()=>{e.autoGrow||(j.value=+e.rows)});function F(){e.autoGrow&&Se(()=>{if(!I.value||!E.value)return;const p=getComputedStyle(I.value),N=getComputedStyle(E.value.$el),D=parseFloat(p.getPropertyValue("--v-field-padding-top"))+parseFloat(p.getPropertyValue("--v-input-padding-top"))+parseFloat(p.getPropertyValue("--v-field-padding-bottom")),U=I.value.scrollHeight,te=parseFloat(p.lineHeight),ce=Math.max(parseFloat(e.rows)*te+D,parseFloat(N.getPropertyValue("--v-input-control-height"))),ne=parseFloat(e.maxRows)*te+D||1/0,H=Wa(U??0,ce,ne);j.value=Math.floor((H-D)/te),S.value=za(H)})}Ta(F),pe(b,F),pe(()=>e.rows,F),pe(()=>e.maxRows,F),pe(()=>e.density,F);let C;return pe(I,p=>{p?(C=new ResizeObserver(F),C.observe(I.value)):C==null||C.disconnect()}),Fa(()=>{C==null||C.disconnect()}),le(()=>{const p=!!(v.counter||e.counter||e.counterValue),N=!!(p||v.details),[D,U]=Da(o),{modelValue:te,...ce}=Re.filterProps(e),ne=Qa(e);return a(Re,de({ref:w,modelValue:b.value,"onUpdate:modelValue":H=>b.value=H,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":Y.value},e.class],style:e.style},D,ce,{centerAffix:j.value===1&&!Y.value,focused:y.value}),{...v,default:H=>{let{id:se,isDisabled:xe,isDirty:J,isReadonly:he,isValid:me}=H;return a(Ka,de({ref:E,style:{"--v-textarea-control-height":S.value},onClick:u,onMousedown:T,"onClick:clear":Q,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ne,{id:se.value,active:k.value||J.value,centerAffix:j.value===1&&!Y.value,dirty:J.value||e.dirty,disabled:xe.value,focused:y.value,error:me.value===!1}),{...v,default:ue=>{let{props:{class:K,...X}}=ue;return a(ve,null,[e.prefix&&a("span",{class:"v-text-field__prefix"},[e.prefix]),_e(a("textarea",de({ref:c,class:K,value:b.value,onInput:q,autofocus:e.autofocus,readonly:he.value,disabled:xe.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:V,onBlur:h},X,U),null),[[We("intersect"),{handler:z},null,{once:!0}]]),e.autoGrow&&_e(a("textarea",{class:[K,"v-textarea__sizer"],id:`${X.id}-sizer`,"onUpdate:modelValue":we=>b.value=we,ref:I,readonly:!0,"aria-hidden":"true"},null),[[Aa,b.value]]),e.suffix&&a("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:N?H=>{var se;return a(ve,null,[(se=v.details)==null?void 0:se.call(v,H),p&&a(ve,null,[a("span",null,null),a(Xa,{active:e.persistentCounter||y.value,value:g.value,max:B.value,disabled:e.disabled},v.counter)])])}:void 0})}),ja({},w,E,c)}}),vl={class:"w-100 d-flex justify-space-between align-items-center"},cl={key:0,class:"d-flex"},ml={key:1,class:"d-flex"},fl={key:1,class:"d-flex"},pl={class:"mb-0"},bl={class:"d-flex"},yl={class:"mb-0"},gl={class:"d-flex"},Vl={class:"mb-0"},xl={class:"d-flex"},kl={key:0,class:"mb-0"},hl={key:1,class:"mb-0"},wl={class:"d-flex"},Pl={class:"mb-0"},Sl={class:"d-flex"},Cl={class:"mb-0"},_l={class:"d-flex"},Il={class:"mb-0"},Nl={class:"d-flex"},Bl={class:"mb-0"},Tl={class:"d-flex"},Fl={class:"livePrice-box"},Dl={class:"d-flex justify-center align-center h-100"},Al={class:"invoice-box"},Rl={__name:"goldboxTradeView",setup(e){const d=f(1),o=[1,2,3,4,5],i=f(!1),v=f(!1),b=f(!1);f(!1),f(!1);const y=f(!1),x=f(),h=f(),g=f(),B=f(""),z=f(""),w=f(!1),E=f(!1);f(""),f(""),f({});const S=f({phoneNumber:"",email:"",fullName:"",address:"",confirmCode:""}),c=f({userId:"",goldPrice:"",goldWeight:"",description:"",totalPrice:"",invoiceId:""}),k=f({date:"",time:"",buyPrice:"67520000",sellPrice:"",milliseconds:""}),V=f({userExist:"",userVerified:""}),u=f({id:"",firstName:"",birthDate:"",lastName:"",fatherName:"",gender:"",officeName:"",phoneNumber:"",nationalCode:"",isHaveBank:""}),T=f([{name:"1",value:1},{name:"2",value:2},{name:"3",value:3},{name:"4",value:4},{name:"5",value:5},{name:"6",value:6},{name:"7",value:7},{name:"8",value:8},{name:"9",value:9},{name:"10",value:10},{name:"11",value:11},{name:"12",value:12},{name:"13",value:13},{name:"14",value:14},{name:"15",value:15},{name:"16",value:16},{name:"17",value:17},{name:"18",value:18},{name:"19",value:19},{name:"20",value:20},{name:"21",value:21},{name:"22",value:22},{name:"23",value:23},{name:"24",value:24},{name:"25",value:25},{name:"26",value:26},{name:"27",value:27},{name:"28",value:28},{name:"29",value:29},{name:"30",value:30},{name:"31",value:31}]),Q=f([{name:"فروردین",value:1},{name:"اردیبهشت",value:2},{name:"خرداد",value:3},{name:"تیر",value:4},{name:"مرداد",value:5},{name:"شهریور",value:6},{name:"مهر",value:7},{name:"آبان",value:8},{name:"آذر",value:9},{name:"دی",value:10},{name:"بهمن",value:11},{name:"اسفند",value:12}]),q=f([{name:"1300",value:1300},{name:"1301",value:1301},{name:"1302",value:1302},{name:"1303",value:1303},{name:"1304",value:1304},{name:"1305",value:1305},{name:"1306",value:1306},{name:"1307",value:1307},{name:"1308",value:1308},{name:"1309",value:1309},{name:"1310",value:1310},{name:"1311",value:1311},{name:"1312",value:1312},{name:"1313",value:1313},{name:"1314",value:1314},{name:"1315",value:1315},{name:"1316",value:1316},{name:"1317",value:1317},{name:"1318",value:1318},{name:"1319",value:1319},{name:"1320",value:1320},{name:"1321",value:1321},{name:"1322",value:1322},{name:"1323",value:1323},{name:"1324",value:1324},{name:"1325",value:1325},{name:"1326",value:1326},{name:"1327",value:1327},{name:"1328",value:1328},{name:"1329",value:1329},{name:"1330",value:1330},{name:"1331",value:1331},{name:"1332",value:1332},{name:"1333",value:1333},{name:"1334",value:1334},{name:"1335",value:1335},{name:"1336",value:1336},{name:"1337",value:1337},{name:"1338",value:1338},{name:"1339",value:1339},{name:"1340",value:1340},{name:"1341",value:1341},{name:"1342",value:1342},{name:"1343",value:1343},{name:"1344",value:1344},{name:"1345",value:1345},{name:"1346",value:1346},{name:"1347",value:1347},{name:"1348",value:1348},{name:"1349",value:1349},{name:"1350",value:1350},{name:"1351",value:1351},{name:"1352",value:1352},{name:"1353",value:1353},{name:"1354",value:1354},{name:"1355",value:1355},{name:"1356",value:1356},{name:"1357",value:1357},{name:"1358",value:1358},{name:"1359",value:1359},{name:"1360",value:1360},{name:"1361",value:1361},{name:"1362",value:1362},{name:"1363",value:1363},{name:"1364",value:1364},{name:"1365",value:1365},{name:"1366",value:1366},{name:"1367",value:1367},{name:"1368",value:1368},{name:"1369",value:1369},{name:"1370",value:1370},{name:"1371",value:1371},{name:"1372",value:1372},{name:"1373",value:1373},{name:"1374",value:1374},{name:"1375",value:1375},{name:"1376",value:1376},{name:"1377",value:1377},{name:"1378",value:1378},{name:"1379",value:1379},{name:"1380",value:1380},{name:"1381",value:1381},{name:"1382",value:1382},{name:"1383",value:1383},{name:"1384",value:1384},{name:"1385",value:1385},{name:"1386",value:1386},{name:"1387",value:1387},{name:"1388",value:1388},{name:"1389",value:1389},{name:"1390",value:1390},{name:"1391",value:1391},{name:"1392",value:1392},{name:"1393",value:1393},{name:"1394",value:1394},{name:"1395",value:1395},{name:"1396",value:1396},{name:"1397",value:1397},{name:"1398",value:1398},{name:"1399",value:1399},{name:"1400",value:1400},{name:"1401",value:1401},{name:"1402",value:1402},{name:"1403",value:1403}]),I=f({}),j=l=>{x.value=l,C()},Y=l=>{h.value=l,C()},F=l=>{g.value=l,C()},C=()=>{if(g.value&&h.value&&x.value){const l=String(h.value).padStart(2,"0"),t=String(x.value).padStart(2,"0");u.value.birthDate=`${g.value}${l}${t}`}},p=async()=>{try{i.value=!0;const l=await ke.AuthNumberTradeGoldbox(S.value.phoneNumber);return V.value.userExist=l.data.userExist,V.value.userVerified=l.data.userVerified,u.value.id=l.data.user.id,u.value.firstName=l.data.user.firstName,u.value.lastName=l.data.user.lastName,u.value.fatherName=l.data.user.fatherName,u.value.gender=l.data.user.gender,u.value.officeName=l.data.user.officeName,u.value.phoneNumber=l.data.user.phoneNumber,u.value.nationalCode=l.data.user.nationalCode,u.value.isHaveBank=l.data.user.isHaveBank,u.value.birthDate=l.data.user.birthDate,l}catch(l){B.value=l.response.data.error||"خطایی رخ داده است!",w.value=!0,setTimeout(()=>{w.value=!1},1e4)}finally{i.value=!1}},N=async()=>{try{return b.value=!0,c.value.userId=u.value.id,c.value.goldPrice=k.value.buyPrice,await ke.CreateInvoiceTradeBuy(c.value)}catch(l){B.value=l.response.data.error||"خطایی رخ داده است!",w.value=!0,setTimeout(()=>{w.value=!1},1e4)}finally{b.value=!1}},D=async()=>{if(d.value===1)return await p();if(d.value===2)return!0;if(d.value===3)return await N();if(d.value===4)return!0;d.value===5||d.value},U=async()=>{if(V.value.userExist==!0)try{v.value=!0,u.value.phoneNumber=S.value.phoneNumber;const l=await ke.AuthIdentityOldUser(u.value);return u.value.fatherName=l.data.fatherName,u.value.gender=l.data.gender,u.value.isHaveBank=l.data.isHaveBank,u.value.officeName=l.data.officeName,u.value.firstName=l.data.firstName,u.value.lastName=l.data.lastName,V.value.userVerified=!0,l}catch(l){B.value=l.response.data.error||"خطایی رخ داده است!",w.value=!0,setTimeout(()=>{w.value=!1},1e4)}finally{v.value=!1}else try{v.value=!0,u.value.phoneNumber=S.value.phoneNumber;const l=await ke.AuthIdentityNewUser(u.value);return u.value.fatherName=l.data.fatherName,u.value.gender=l.data.gender,u.value.isHaveBank=l.data.isHaveBank,u.value.officeName=l.data.officeName,u.value.firstName=l.data.firstName,u.value.lastName=l.data.lastName,V.value.userVerified=!0,l}catch(l){B.value=l.response.data.error||"خطایی رخ داده است!",w.value=!0,setTimeout(()=>{w.value=!1},1e4)}finally{v.value=!1}},te=[l=>!!l||"شماره همراه الزامی است",l=>/^09\d{9}$/.test(l)||"شماره معتبر نیست"],ce=[l=>!!l||"شناسه پرداخت الزامی است"],ne=[l=>!!l||"کد ملی الزامی است",l=>/^\d{10}$/.test(l)||"کد ملی باید ۱۰ رقم باشد",l=>{if(!/^\d{10}$/.test(l))return!0;const t=+l[9],$=l.split("").slice(0,9).reduce((s,Pe,fe)=>s+ +Pe*(10-fe),0)%11;return $<2&&t===$||$>=2&&t+$===11||"کد ملی نامعتبر است"}],H=[l=>!!l||"مقدار ورودی نمی‌تواند خالی باشد",l=>/^\d+(\.\d{1,2})?$/.test(l)||"فقط عدد مجاز است و حداکثر ۲ رقم اعشار"],se=()=>{u.value.nationalCode=u.value.nationalCode.replace(/\D/g,"").slice(0,10),ne.every(l=>l(u.value.nationalCode)===!0)},xe=l=>!!l||"این فیلد الزامی است",J=(l,t)=>{l&&(I.value[t]=l)},he=()=>{S.value.phoneNumber=S.value.phoneNumber.replace(/\D/g,"").slice(0,11)},me=l=>l<d.value,ue=_(()=>I.value[d.value]?I.value[d.value].isValid:!1),K=async()=>{const l=I.value[d.value];if(l){const{valid:t}=await l.validate();t&&await D()&&d.value++}},X=()=>{d.value>1&&d.value--,x.value="",h.value="",g.value="",u.value.nationalCode=""},we=async()=>{const l=I.value[d.value];if(l){const{valid:t}=await l.validate();t&&alert("فرم با موفقیت ارسال شد!")}},Me=()=>{const[l,t,$]=k.value.date.split("/").map(Number),[s,Pe]=k.value.time.split(":").map(Number),fe=Ha.toGregorian(l,t,$),Ye=new Date(fe.gy,fe.gm-1,fe.gd,s,Pe,0);k.value.milliseconds=Ye.getTime()},Le=async()=>{Me();try{y.value=!0;const l=await el.GoldPriceByTime(k.value.milliseconds);return k.value.buyPrice=l.buyPrice,k.value.sellPrice=l.sellPrice,l}catch(l){B.value=l.response.data.error||"خطایی رخ داده است!",w.value=!0,setTimeout(()=>{w.value=!1},1e4)}finally{y.value=!1}},Oe=()=>{c.value.totalPrice=c.value.totalPrice.replace(/[^0-9]/g,""),c.value.goldWeight=(c.value.totalPrice/k.value.buyPrice).toFixed(2)},qe=()=>{c.value.goldWeight=c.value.goldWeight.replace(/[^0-9.]/g,"");const l=c.value.goldWeight.split(".");l.length>1&&(c.value.goldWeight=l[0]+"."+l.slice(1).join("")),l.length>1&&l[1].length>2&&(c.value.goldWeight=l[0]+"."+l[1].slice(0,2)),c.value.totalPrice=parseInt(c.value.goldWeight*k.value.buyPrice)};return(l,t)=>{const $=Ea("persian-date-picker");return P(),Z(ve,null,[a(M,{class:"k-row"},{default:n(()=>[a(m,{cols:"12"},{default:n(()=>[a(rl,{modelValue:d.value,"onUpdate:modelValue":t[12]||(t[12]=s=>d.value=s)},{default:n(()=>[a(Ee,null,{default:n(()=>[(P(),Z(ve,null,Ua(o,s=>a(He,{key:s,complete:me(s),title:`مرحله ${s}`,value:s,icon:me(s)?"ri-check-line":"ri-close-line",color:me(s)?"#0b8707":"#c7c3c3",class:"custom-stepper-icon"},null,8,["complete","title","value","icon","color"])),64))]),_:1}),a($e,null,{default:n(()=>[a(ie,{value:1},{default:n(()=>[a(be,{class:"step-card"},{default:n(()=>[a(ge,{ref:s=>J(s,1)},{default:n(()=>[a(Ve,null,{default:n(()=>[a(M,null,{default:n(()=>[a(m,{cols:"12"},{default:n(()=>t[13]||(t[13]=[r("div",{class:"d-flex"},[r("h3",{class:"trade-step-title"},"احراز هویت")],-1)])),_:1}),a(m,{cols:"12",md:"4",class:"d-none d-md-flex"}),a(m,{cols:"12",md:"4"},{default:n(()=>[a(oe,{modelValue:S.value.phoneNumber,"onUpdate:modelValue":t[0]||(t[0]=s=>S.value.phoneNumber=s),label:"شماره همراه",variant:"outlined",rules:te,onInput:he},null,8,["modelValue"])]),_:1}),a(m,{cols:"12",md:"4",class:"d-none d-md-flex"})]),_:1})]),_:1})]),_:1},512),a(ye,{class:"btn-box first-step"},{default:n(()=>[a(R,{onClick:K,color:"primary",size:"large",variant:"elevated",loading:i.value,disabled:!ue.value},{default:n(()=>t[14]||(t[14]=[A(" بعدی ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1}),a(ie,{value:2},{default:n(()=>[a(be,{class:"step-card"},{default:n(()=>[a(ge,{ref:s=>J(s,2)},{default:n(()=>[a(Ve,null,{default:n(()=>[a(M,null,{default:n(()=>[a(m,{cols:"12"},{default:n(()=>[r("div",vl,[t[17]||(t[17]=r("h3",{class:"trade-step-title"},"اطلاعات کاربر",-1)),V.value.userVerified?(P(),Z("div",cl,[t[15]||(t[15]=r("p",{class:"mb-0"},"کاربر احراز هویت شده است",-1)),a(re,{class:"me-2",size:"small",icon:"ri-check-line",color:"#0b8707"})])):(P(),Z("div",ml,[t[16]||(t[16]=r("p",{class:"mb-0"},"کاربر احراز هویت نشده است",-1)),a(re,{class:"me-2",size:"small",icon:"ri-close-line",color:"#c9190c"})]))])]),_:1}),a(m,{cols:"12",md:"3",class:"my-3"},{default:n(()=>[V.value.userVerified==!1?(P(),W(oe,{key:0,modelValue:u.value.nationalCode,"onUpdate:modelValue":t[1]||(t[1]=s=>u.value.nationalCode=s),label:"کد ملی",variant:"outlined",rules:ne,onInput:se},null,8,["modelValue"])):(P(),Z("div",fl,[t[18]||(t[18]=r("p",{class:"mb-0"},"کد ملی : ",-1)),r("p",pl,G(u.value.nationalCode),1)]))]),_:1}),V.value.userVerified==!1?(P(),W(m,{key:0,cols:"4",md:"3",class:"my-3"})):L("",!0),V.value.userVerified==!1?(P(),W(m,{key:1,cols:"4",md:"2",class:"my-3"},{default:n(()=>[a(Ce,{modelValue:x.value,"onUpdate:modelValue":[t[2]||(t[2]=s=>x.value=s),j],label:"روز تولد",items:T.value,variant:"outlined","item-title":"name","item-value":"value",class:"first-select",rules:[s=>!!s||"روز الزامی است"]},null,8,["modelValue","items","rules"])]),_:1})):L("",!0),V.value.userVerified==!1?(P(),W(m,{key:2,cols:"4",md:"2",class:"my-3"},{default:n(()=>[a(Ce,{modelValue:h.value,"onUpdate:modelValue":[t[3]||(t[3]=s=>h.value=s),Y],label:"ماه تولد",items:Q.value,variant:"outlined",class:"second-select","item-title":"name","item-value":"value",rules:[s=>!!s||"ماه الزامی است"]},null,8,["modelValue","items","rules"])]),_:1})):L("",!0),V.value.userVerified==!1?(P(),W(m,{key:3,cols:"4",md:"2",class:"my-3"},{default:n(()=>[a(Ce,{modelValue:g.value,"onUpdate:modelValue":[t[4]||(t[4]=s=>g.value=s),F],label:"سال تولد",items:q.value,variant:"outlined",class:"third-select","item-title":"name","item-value":"value",rules:[s=>!!s||"سال الزامی است"]},null,8,["modelValue","items","rules"])]),_:1})):L("",!0),V.value.userVerified==!0?(P(),W(m,{key:4,cols:"12",md:"3",class:"my-3"},{default:n(()=>[r("div",bl,[t[19]||(t[19]=r("p",{class:"mb-0"},"تاریخ تولد : ",-1)),r("p",yl,G(u.value.birthDate),1)])]),_:1})):L("",!0),a(m,{cols:"12",md:"3",class:"my-3"},{default:n(()=>[r("div",gl,[t[20]||(t[20]=r("p",{class:"mb-0"},"شماره همراه : ",-1)),r("p",Vl,G(S.value.phoneNumber),1)])]),_:1}),a(m,{cols:"12",md:"3",class:"my-3"},{default:n(()=>[r("div",xl,[t[21]||(t[21]=r("p",{class:"mb-0"},"جنسیت : ",-1)),u.value.gender==!0?(P(),Z("p",kl,"مرد")):u.value.gender==!1?(P(),Z("p",hl,"زن")):L("",!0)])]),_:1}),a(m,{cols:"12",md:"3",class:"my-3"},{default:n(()=>[r("div",wl,[t[22]||(t[22]=r("p",{class:"mb-0"},"نام : ",-1)),r("p",Pl,G(u.value.firstName),1)])]),_:1}),a(m,{cols:"12",md:"3",class:"my-3"},{default:n(()=>[r("div",Sl,[t[23]||(t[23]=r("p",{class:"mb-0"},"نام خانوادگی : ",-1)),r("p",Cl,G(u.value.lastName),1)])]),_:1}),a(m,{cols:"12",md:"3",class:"my-3"},{default:n(()=>[r("div",_l,[t[24]||(t[24]=r("p",{class:"mb-0"},"نام پدر : ",-1)),r("p",Il,G(u.value.fatherName),1)])]),_:1}),a(m,{cols:"12",md:"3",class:"my-3"},{default:n(()=>[r("div",Nl,[t[25]||(t[25]=r("p",{class:"mb-0"},"شهر : ",-1)),r("p",Bl,G(u.value.officeName),1)])]),_:1}),a(m,{cols:"12",md:"3",class:"my-3"},{default:n(()=>[r("div",Tl,[t[26]||(t[26]=r("p",{class:"mb-0"},"کارت بانکی : ",-1)),u.value.isHaveBank==!0?(P(),W(re,{key:0,size:"small",icon:"ri-close-line",color:"#c9190c"})):u.value.isHaveBank==!1?(P(),W(re,{key:1,size:"small",icon:"ri-check-line",color:"#0b8707"})):L("",!0)])]),_:1})]),_:1})]),_:1})]),_:1},512),a(ye,{class:"btn-box"},{default:n(()=>[a(R,{onClick:X,size:"large"},{default:n(()=>t[27]||(t[27]=[A("قبلی")])),_:1}),V.value.userVerified==!1?(P(),W(R,{key:0,onClick:U,color:"primary",size:"large",variant:"elevated",disabled:!ue.value,loading:v.value},{default:n(()=>t[28]||(t[28]=[A(" استعلام هویت ")])),_:1},8,["disabled","loading"])):(P(),W(R,{key:1,onClick:K,color:"primary",size:"large",variant:"elevated",loading:v.value},{default:n(()=>t[29]||(t[29]=[A(" بعدی ")])),_:1},8,["loading"]))]),_:1})]),_:1})]),_:1}),a(ie,{value:3},{default:n(()=>[a(be,{class:"step-card"},{default:n(()=>[a(ge,{ref:s=>J(s,3)},{default:n(()=>[a(Ve,null,{default:n(()=>[a(M,null,{default:n(()=>[a(m,{cols:"12"},{default:n(()=>t[30]||(t[30]=[r("div",{class:"w-100 d-flex justify-space-between align-items-center"},[r("h3",{class:"trade-step-title"},"ثبت خرید")],-1)])),_:1})]),_:1}),a(M,{class:""},{default:n(()=>[a(m,{cols:"12",md:"3"},{default:n(()=>[a($,{modelValue:k.value.date,"onUpdate:modelValue":t[5]||(t[5]=s=>k.value.date=s),placeholder:"تاریخ"},null,8,["modelValue"])]),_:1}),a(m,{cols:"12",md:"3"},{default:n(()=>[a($,{type:"time",modelValue:k.value.time,"onUpdate:modelValue":t[6]||(t[6]=s=>k.value.time=s),placeholder:"زمان"},null,8,["modelValue"])]),_:1}),a(m,{cols:"12",md:"3"},{default:n(()=>[r("div",Fl,[t[31]||(t[31]=r("p",null,"قیمت طلا : ",-1)),r("p",null,G(k.value.buyPrice),1)])]),_:1}),a(m,{cols:"12",md:"3"},{default:n(()=>[a(R,{onClick:Le,class:"h-100",color:"primary",size:"large",variant:"elevated",block:""},{default:n(()=>t[32]||(t[32]=[A(" استعلام قیمت طلا ")])),_:1})]),_:1})]),_:1}),a(M,null,{default:n(()=>[a(m,{cols:"12",md:"3"},{default:n(()=>[a(oe,{modelValue:c.value.totalPrice,"onUpdate:modelValue":t[7]||(t[7]=s=>c.value.totalPrice=s),label:"مبلغ (ریال)",variant:"outlined",onInput:Oe},null,8,["modelValue"])]),_:1}),a(m,{cols:"12",md:"2"},{default:n(()=>[r("div",Dl,[a(re,{class:"me-2",size:"small",icon:"ri-arrow-left-right-line",color:"#0b8707"})])]),_:1}),a(m,{cols:"12",md:"3"},{default:n(()=>[a(oe,{modelValue:c.value.goldWeight,"onUpdate:modelValue":t[8]||(t[8]=s=>c.value.goldWeight=s),label:"وزن (گرم)",variant:"outlined",rules:H,onInput:qe},null,8,["modelValue"])]),_:1}),a(m,{cols:"12",md:"4"},{default:n(()=>[a(oe,{modelValue:c.value.invoiceId,"onUpdate:modelValue":t[9]||(t[9]=s=>c.value.invoiceId=s),label:"شناسه پرداخت",variant:"outlined",rules:ce},null,8,["modelValue"])]),_:1}),a(m,{cols:"12"},{default:n(()=>[a(dl,{label:"توضیحات (اختیاری)",variant:"outlined",modelValue:c.value.description,"onUpdate:modelValue":t[10]||(t[10]=s=>c.value.description=s)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},512),a(ye,{class:"btn-box"},{default:n(()=>[a(R,{onClick:X,size:"large"},{default:n(()=>t[33]||(t[33]=[A("قبلی")])),_:1}),a(R,{onClick:K,color:"primary",size:"large",variant:"elevated",disabled:!ue.value},{default:n(()=>t[34]||(t[34]=[A(" بعدی ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),a(ie,{value:4},{default:n(()=>[a(be,{class:"step-card"},{default:n(()=>[a(ge,{ref:s=>J(s,4)},{default:n(()=>[a(Ve,null,{default:n(()=>[a(M,null,{default:n(()=>[a(m,{cols:"12"},{default:n(()=>t[35]||(t[35]=[r("div",{class:"w-100 d-flex justify-space-between align-items-center"},[r("h3",{class:"trade-step-title"},"فاکتور فروش")],-1)])),_:1})]),_:1}),a(M,null,{default:n(()=>[a(m,{cols:"6",md:"3"},{default:n(()=>[r("div",Al,[r("p",null,G(),1),r("p",null,G(),1)])]),_:1})]),_:1})]),_:1})]),_:1},512),a(ye,{class:"btn-box"},{default:n(()=>[a(R,{onClick:X,size:"large"},{default:n(()=>t[36]||(t[36]=[A("قبلی")])),_:1}),a(R,{onClick:K,color:"primary",size:"large",variant:"elevated",disabled:!ue.value},{default:n(()=>t[37]||(t[37]=[A(" بعدی ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),a(ie,{value:5},{default:n(()=>[a(be,{class:"step-card"},{default:n(()=>[a(ge,{ref:s=>J(s,5)},{default:n(()=>[a(Ve,null,{default:n(()=>[a(M,null,{default:n(()=>[a(m,{cols:"12",md:"6"},{default:n(()=>[a(oe,{modelValue:S.value.confirmCode,"onUpdate:modelValue":t[11]||(t[11]=s=>S.value.confirmCode=s),label:"کد تأیید را وارد کنید",variant:"outlined",rules:[xe]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1},512),a(ye,{class:"btn-box"},{default:n(()=>[a(R,{onClick:X,size:"large"},{default:n(()=>t[38]||(t[38]=[A("قبلی")])),_:1}),a(R,{onClick:we,color:"success",size:"large",variant:"elevated"},{default:n(()=>t[39]||(t[39]=[A("ثبت")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),w.value?(P(),W(Fe,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:n(()=>[A(G(B.value),1)]),_:1})):L("",!0),E.value?(P(),W(Fe,{key:1,color:"success",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:n(()=>[A(G(z.value),1)]),_:1})):L("",!0)],64)}}},ql=Ga(Rl,[["__scopeId","data-v-faee4b28"]]);export{ql as default};
