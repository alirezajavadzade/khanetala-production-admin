import{_ as x,r,c as k,e as w,w as u,a7 as h,a4 as N,a as p,b as s,o as c,B as f,t as _,a2 as C,a3 as S,$ as B}from"./index-Dfpqkfnz.js";import{V as v}from"./api-BIT11rdG.js";import{V as I}from"./VCard-DECbdgiQ.js";import{V as A}from"./VForm-BcN4j-94.js";import{V as g}from"./VTextField-B9oVOGi3.js";import"./VAvatar-CthOB--A.js";import"./VImg-C-fKbzw8.js";import"./form-D43RqBoT.js";import"./index--CYg-LPA.js";const T="/logo.png",D={async Shahkar(n){const o=await v.post("",n);return localStorage.setItem("authtoken",o.data.token),o.data},async Login(n){const o=JSON.stringify(n),a=await v.post("/admin/login",o),l=a.data.data.token;return localStorage.setItem("token",l),a.data}},F={__name:"loginView",setup(n){const o=r(!1),a=r({phoneNumber:"",password:""}),l=r(!1),d=r("test"),m=r(!1),V=[e=>!!e||"شماره همراه نمی‌تواند خالی باشد",e=>/^\d{11}$/.test(e)||"شماره همراه باید 11 رقم باشد",e=>e.startsWith("09")||"شماره همراه باید با 09 شروع شود"],b=()=>{a.value.phoneNumber=a.value.phoneNumber.replace(/[٠-٩۰-۹]/g,e=>String.fromCharCode(e.charCodeAt(0)-(e.charCodeAt(0)>=1776?1728:1584))).replace(/\D/g,"").slice(0,11)},y=async()=>{try{l.value=!0;const e=await D.Login(a.value);return B.push("/Dashboard"),e}catch(e){d.value=e.response.data.error||"خطایی رخ داده است!",m.value=!0,setTimeout(()=>{m.value=!1},5e3)}finally{l.value=!1}};return(e,t)=>(c(),k("div",null,[m.value?(c(),w(h,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:u(()=>[f(_(d.value),1)]),_:1})):N("",!0),t[4]||(t[4]=p("div",{class:"d-flex flex-column justify-center align-items-center"},[p("img",{src:T,class:"mx-auto my-6","max-width":"228",alt:"خانه طلا"}),p("p",{class:"title"},"پنل مدیریت خانه طلا")],-1)),s(I,{class:"mx-2 mx-md-auto pa-8",elevation:"4","max-width":"448",rounded:"lg"},{default:u(()=>[s(A,{ref:"form",onSubmit:C(y,["prevent"])},{default:u(()=>[s(g,{modelValue:a.value.phoneNumber,"onUpdate:modelValue":t[0]||(t[0]=i=>a.value.phoneNumber=i),label:"شماره همراه",class:"my-6 login-input",rules:V,onInput:b},null,8,["modelValue"]),s(g,{modelValue:a.value.password,"onUpdate:modelValue":t[1]||(t[1]=i=>a.value.password=i),label:"رمز عبور",class:"my-6 login-input","append-inner-icon":o.value?"ri-eye-line":"ri-eye-off-line",type:o.value?"text":"password","onClick:appendInner":t[2]||(t[2]=i=>o.value=!o.value)},null,8,["modelValue","append-inner-icon","type"]),s(S,{type:"submit",class:"mb-8 k-btn",color:"#d4af37",size:"large",loading:l.value,block:""},{default:u(()=>t[3]||(t[3]=[f(" ورود به پنل ")])),_:1},8,["loading"])]),_:1},512)]),_:1})]))}},R=x(F,[["__scopeId","data-v-6f110f5a"]]);export{R as default};
