import{_ as x,r,c as k,e as w,w as m,a7 as h,h as N,a as p,b as n,o as c,C as f,t as S,a3 as C,a4 as _,a0 as I}from"./index-Dbwicb6H.js";import{V as g}from"./api-BJvVem6W.js";import{V as B}from"./VCard-BQgM7hxv.js";import{V as A}from"./VForm-DEPeqhzU.js";import{V as v}from"./VTextField-Bpc0VdGj.js";import"./index-CSwstpxY.js";import"./VImg-IfgpgyIs.js";const T="/logo.png",D={async Shahkar(i){const o=await g.post("",i);return localStorage.setItem("authtoken",o.data.token),o.data},async Login(i){const o=JSON.stringify(i),a=await g.post("/admin/login",o),s=a.data.data.token,l=a.data.data.accessPoints;return console.log(l),localStorage.setItem("token",s),localStorage.setItem("permissions",JSON.stringify(l)),a.data}},F={__name:"loginView",setup(i){const o=r(!1),a=r({phoneNumber:"",password:""}),s=r(!1),l=r("test"),d=r(!1),V=[e=>!!e||"شماره همراه نمی‌تواند خالی باشد",e=>/^\d{11}$/.test(e)||"شماره همراه باید 11 رقم باشد",e=>e.startsWith("09")||"شماره همراه باید با 09 شروع شود"],b=()=>{a.value.phoneNumber=a.value.phoneNumber.replace(/[٠-٩۰-۹]/g,e=>String.fromCharCode(e.charCodeAt(0)-(e.charCodeAt(0)>=1776?1728:1584))).replace(/\D/g,"").slice(0,11)},y=async()=>{try{s.value=!0;const e=await D.Login(a.value);return I.push("/Dashboard"),e}catch(e){l.value=e.response.data.error||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{s.value=!1}};return(e,t)=>(c(),k("div",null,[d.value?(c(),w(h,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:m(()=>[f(S(l.value),1)]),_:1})):N("",!0),t[4]||(t[4]=p("div",{class:"d-flex flex-column justify-center align-items-center"},[p("img",{src:T,class:"mx-auto my-6","max-width":"228",alt:"خانه طلا"}),p("p",{class:"title"},"پنل مدیریت خانه طلا")],-1)),n(B,{class:"mx-2 mx-md-auto pa-8",elevation:"4","max-width":"448",rounded:"lg"},{default:m(()=>[n(A,{ref:"form",onSubmit:C(y,["prevent"])},{default:m(()=>[n(v,{modelValue:a.value.phoneNumber,"onUpdate:modelValue":t[0]||(t[0]=u=>a.value.phoneNumber=u),label:"شماره همراه",class:"my-6 login-input",rules:V,onInput:b},null,8,["modelValue"]),n(v,{modelValue:a.value.password,"onUpdate:modelValue":t[1]||(t[1]=u=>a.value.password=u),label:"رمز عبور",class:"my-6 login-input","append-inner-icon":o.value?"ri-eye-line":"ri-eye-off-line",type:o.value?"text":"password","onClick:appendInner":t[2]||(t[2]=u=>o.value=!o.value)},null,8,["modelValue","append-inner-icon","type"]),n(_,{type:"submit",class:"mb-8 k-btn",color:"#d4af37",size:"large",loading:s.value,block:""},{default:m(()=>t[3]||(t[3]=[f(" ورود به پنل ")])),_:1},8,["loading"])]),_:1},512)]),_:1})]))}},$=x(F,[["__scopeId","data-v-6f110f5a"]]);export{$ as default};
